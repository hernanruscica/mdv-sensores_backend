@adminToken = eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MzIsInVzZXJOYW1lIjoiIiwiZG5pIjoiIiwiaWF0IjoxNzQ1ODU3OTQ0LCJleHAiOjE3NDU5NDQzNDR9.2hSTFqOZtI7VDjYAtwzUQELwDEqmIzugbC_896IirLY
@baseUrl = http://localhost:5000
//@baseUrl = https://mdv-sensores-backend.onrender.com

######################################################################################
##################################### users #####################################
######################################################################################

### User login - http://localhost:5000/api/users/login
POST {{baseUrl}}/api/users/login
Content-Type: application/json

{
  "dni": 28470359,
  "password": "pass"
} 

### user registry (admin auth required)
POST {{baseUrl}}/api/users/
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "foto":"",
   "nombre_1":"demo1140",
   "nombre_2":"cuatro",
   "apellido_1":"mdvSensores",
   "apellido_2":"dfd",
   "email":"demo1140@geocities.com",
   "telefono":"15364631187",
   "dni":"1014010100",
   "password":"88488",
   "estado":"1",
   "direcciones_id": "1"  
}

###Activate User
GET {{baseUrl}}/api/users/activate/eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6MTMxLCJpYXQiOjE3MzYzNTQ2MDQsImV4cCI6MTczNjQ0MTAwNH0.hEJOJ0Wg0w0E1OC5g0-9So8OHtGxMoi448Vk6UkJp3I
Content-Type: application/json

###SendActivationEmail
GET {{baseUrl}}/api/users/sendactivation/cesarhernanruscica@gmail.com
Content-Type: application/json

### user update 
PUT {{baseUrl}}/api/users/85
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "espropietario": 1
}

### getAllUsers
GET {{baseUrl}}/api/users
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getById
GET {{baseUrl}}/api/users/84
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###/api/users/byuser/${userId} 
GET {{baseUrl}}/api/users/byuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### deleteById

DELETE {{baseUrl}}/api/users/131
Content-Type: application/json
Authorization: Bearer {{adminToken}}

######################################################################################
##################################### DATALOGGERS ####################################
######################################################################################

### Dataloggers getById : ✔️ con estado.
GET {{baseUrl}}/api/dataloggers/3
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Dataloggers getAll - Incluye a los que tienen estado en cero (0) ✔️ con estado.
GET {{baseUrl}}/api/dataloggers
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Dataloggers getAll by location ✔️ con estado.
GET {{baseUrl}}/api/dataloggers/bylocation/67
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Dataloggers getAll by user ✔️ con estado.
GET {{baseUrl}}/api/dataloggers/byuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  Datalogger register ✔️ con estado.
POST {{baseUrl}}/api/dataloggers/ 
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "direccion_mac":"84:CC:A8:7A:32:EE",
   "nombre":"otro datalogger mas para MDV",
   "descripcion":"Esta es la descripcion de el datalogger de Clinitec, ubicado en Salta.",   
   "foto":"dataloggerFalso.jpg",
   "nombre_tabla":"clinitec1",
   "ubicacion_id": 67,
   "estado"   : 1
}

### Datalogger update ✔️ con estado.
PUT {{baseUrl}}/api/dataloggers/40
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "estado": "0"
}

### datalogger delete 
DELETE {{baseUrl}}/api/dataloggers/26
Content-Type: application/json
Authorization: Bearer {{adminToken}}

######################################################################################
##################################### Locations ####################################
######################################################################################

### Locations getById
GET {{baseUrl}}/api/locations/68
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### Locations getAll
GET {{baseUrl}}/api/locations
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  Locations register
POST {{baseUrl}}/api/locations
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "nombre":"test 2 con estado 1",
   "descripcion":"ubicacion para el usuario juan perez",   
   "foto":"dataloggerFalso.jpg",
   "telefono":"48416987",
   "email": "correo@gmail.com",
   "direcciones_id": 90,
   "usuarios_id": 32
}

### location update
PUT {{baseUrl}}/api/locations/72
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "estado": "1"
}

### location delete
DELETE {{baseUrl}}/api/locations/71
Content-Type: application/json
Authorization: Bearer {{adminToken}}


######################################################################################
##################################### addresses ####################################
######################################################################################

### addresses getById
GET {{baseUrl}}/api/addresses/34
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### addresses getAll
GET {{baseUrl}}/api/addresses
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  addresses register
POST {{baseUrl}}/api/addresses
Content-Type: application/json
Authorization: Bearer {{adminToken}}

#calle, numero, localidad, partido, provincia, codigo_postal, latitud, longitud
{
   "calle":"Av. Siempre Viva",
   "numero": "155",   
   "localidad":"1212",
   "partido":"48416987",
   "provincia": "02",
   "codigo_postal": "66" ,
   "latitud" : "-31.5375",
   "longitud": "-68.5364"
}

### location update
PUT {{baseUrl}}/api/addresses/70
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "numero": "555"
}

### location delete
DELETE {{baseUrl}}/api/addresses/70
Content-Type: application/json
Authorization: Bearer {{adminToken}}

######################################################################################
##################################### channels ####################################
######################################################################################

### channels getById ✔️ con estado.
GET {{baseUrl}}/api/channels/7
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### channels getAll  ✔️ con estado.
GET {{baseUrl}}/api/channels  
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### channels getall by datalogger id   ✔️ con estado.
GET {{baseUrl}}/api/channels/bydatalogger/3
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### channels getall by user id /api/channels/byuser/${userId}   ✔️ con estado.
GET {{baseUrl}}/api/channels/byuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  channels register  ✔️ con estado.
POST {{baseUrl}}/api/channels
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "datalogger_id":"3",
   "nombre": "canal API test",   
   "descripcion":"Canal falso para probar la api de canales",
   "nombre_columna":"d2",
   "tiempo_a_promediar": "60",
   "foto": "canales.jpg" ,
   "multiplicador" : "1",
   "estado": "1"
}

### channels update  ✔️ con estado.
PUT {{baseUrl}}/api/channels/30
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "estado": "0"
}

### channels delete
DELETE {{baseUrl}}/api/channels/27
Content-Type: application/json
Authorization: Bearer {{adminToken}}

######################################################################################
##################################### alarms ####################################
######################################################################################

### alarms getById
GET {{baseUrl}}/api/alarms/48
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### alarms getAll with  state = 1
GET {{baseUrl}}/api/alarms
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### alarms getAll by location
GET {{baseUrl}}/api/alarms/bylocation/67
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  alarms register 
POST {{baseUrl}}/api/alarms
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "canal_id":"12",   
   "nombre": "Dispenser de MDV - Porcentaje de uso maximo.",     
   "descripcion":"Se dispara cuando sobrepasa los valores determinados en la condicion.",   
   "periodo_tiempo": "15" ,
   "nombre_variables": "porcentaje_encendido",
   "condicion": "porcentaje_encendido > 30",
   "estado" : "1",
   "usuario_id": "32",
   "tipo_alarma": "PORCENTAJE_ENCENDIDO"
}

### alarms update
PUT {{baseUrl}}/api/alarms/66
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
  "estado": "1",
  "condicion": "porcentaje_encendido > 60"
}

### alarms delete
DELETE {{baseUrl}}/api/alarms/56
Content-Type: application/json
Authorization: Bearer {{adminToken}}


######################################################################################
##################################### alarmUsers ####################################
######################################################################################

### alarmusers getById
GET {{baseUrl}}/api/alarmusers/10
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### alarmusers getAll
GET {{baseUrl}}/api/alarmusers
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll users by alarm  
GET {{baseUrl}}/api/alarmusers/usersbyalarm/66
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### alarmusers getAll byuser 
GET {{baseUrl}}/api/alarmusers/alarmsbyuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}


###  alarmusers register 
POST {{baseUrl}}/api/alarmusers
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "alarma_id":"66",
   "usuario_id": "2"   
}

### alarmusers update
PUT {{baseUrl}}/api/alarmusers/44
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "alarma_id":"56",
   "usuario_id": "85"
}

### alarmusers delete
DELETE {{baseUrl}}/api/alarmusers/47
Content-Type: application/json
Authorization: Bearer {{adminToken}}


######################################################################################
##################################### alarmLogs ####################################
######################################################################################

### alarmLogs getById
GET {{baseUrl}}/api/alarmlogs/4157
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### alarmLogs getAll
GET {{baseUrl}}/api/alarmlogs
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll alarmLogs by user 
GET {{baseUrl}}/api/alarmlogs/byuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll alarmLogs by channel 
GET {{baseUrl}}/api/alarmlogs/bychannel/9
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll alarmLogs by alarm id 
GET {{baseUrl}}/api/alarmlogs/byalarm/67
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###  alarmLogs register - alarma_id, usuario_id, canal_id, valor
POST {{baseUrl}}/api/alarmLogs/
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "alarma_id":"56",
   "usuario_id": "84",
   "canal_id": "10",
   "variables":"{'d2_porc_encendido':36.38}"   
}

### alarmLogs update
PUT {{baseUrl}}/api/alarmLogs/2943
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "fecha_vista":"2025-03-11"
}

### alarmLogs delete
DELETE {{baseUrl}}/api/alarmLogs/44
Content-Type: application/json
Authorization: Bearer {{adminToken}}


######################################################################################
##################################### locationsUsers ####################################
######################################################################################

### locationsusers getById
GET {{baseUrl}}/api/locationsusers/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### locationsusers getAll
GET {{baseUrl}}/api/locationsusers
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll users by location  /api/locationsusers/locationsbyuser/
GET {{baseUrl}}/api/locationsusers/usersbylocation/36
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### getAll locations by user 
GET {{baseUrl}}/api/locationsusers/locationsbyuser/32
Content-Type: application/json
Authorization: Bearer {{adminToken}}



###  locationsusers register - usuarios_id, ubicaciones_id, roles_id
POST {{baseUrl}}/api/locationsusers
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "ubicaciones_id":"81",
   "usuarios_id": "101",
   "roles_id": "7"   
}

### locationsusers update
PUT {{baseUrl}}/api/locationsusers/84
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "ubicaciones_id":"34",
   "usuarios_id": "7",
   "roles_id": "8"   
}

### locationsusers delete
DELETE {{baseUrl}}/api/locationsusers/67
Content-Type: application/json
Authorization: Bearer {{adminToken}}

######################################################################################
#####################################    data      ###################################
######################################################################################

### data getAll by timePeriod  - :table/:period in minutes
# A day: 1440 minutes  2 Days: 2880
GET {{baseUrl}}/api/data/quilmes/60
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### '/getporcentages/:tableName/:columnPrefix/:timePeriod/:rangePorcentage' time and ranges in minutes /api/data/getporcentages/cocina/d1/7200/60
GET {{baseUrl}}/api/data/getporcentages/cocina/d3/7200/720 
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### 'api/data/getanalog/:tableName/:columnPrefix/:timePeriod' time and ranges in minutes
GET {{baseUrl}}/api/data/getanalog/cocina/a1/2880
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###'/getlastdata/'
GET {{baseUrl}}/api/data/getLastData
Content-Type: application/json
Authorization: Bearer {{adminToken}}

{
   "tableName": "cocina"
}

######################################################################################
#####################################    Images    ###################################
######################################################################################

### getimage

GET {{baseUrl}}/api/images/mdvsrl-logo.jpg
Content-Type: application/json
Authorization: Bearer {{adminToken}}

### get on render
GET https://mdv-monitoreo-remoto-backend.onrender.com/api/images/carlos.jpg
Content-Type: application/json
Authorization: Bearer {{adminToken}}

###POST image 

POST {{baseUrl}}/api/images
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: Bearer {{adminToken}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="mdvsrl-logo.jpg"
Content-Type: image/jpeg

< ./src/uploads/mdvsrl-logo.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--







### post image on render disk

POST https://mdv-monitoreo-remoto-backend.onrender.com/api/images
Content-Type: multipart/form-data; boundary=----WebKitFormBoundary7MA4YWxkTrZu0gW
Authorization: Bearer {{adminToken}}

------WebKitFormBoundary7MA4YWxkTrZu0gW
Content-Disposition: form-data; name="image"; filename="cafetera_generica.jpg"
Content-Type: image/jpeg

< ./src/uploads/cafetera_generica.jpg
------WebKitFormBoundary7MA4YWxkTrZu0gW--

